<div class="grid grid-cols-12 gap-2">
    <div class="col-span-12 md:col-span-12">
        <p-card>
            <ng-template #content>
                <div
                    class="flex flex-col md:flex-row md:justify-between md:items-center text-center md:text-right gap-2"
                >
                    <h1 class="text-xl font-semibold">LISTA DE PRODUCTOS</h1>
                    <div class="flex justify-center md:justify-start gap-2">
                        <p-button
                            icon="fa-solid fa-refresh"
                            label="Actualizar"
                            (onClick)="mdRefreshData()"
                        ></p-button>
                        <p-button
                            icon="fa-solid fa-plus"
                            label="Nuevo"
                            (onClick)="mdCreate()"
                        ></p-button>
                    </div>
                </div>
            </ng-template>
        </p-card>
    </div>
    <div class="col-span-12 md:col-span-12">
        <p-card class="mb-2">
            <ng-template #content>
                <p-table
                    #dt
                    [value]="listData"
                    [(contextMenuSelection)]="selectedRow"
                    [contextMenu]="cm"
                    dataKey="id"
                    [paginator]="false"
                    [tableStyle]="{ 'min-width': '50rem' }"
                    [loading]="loadingTable"
                >
                    <ng-template #header>
                        <tr>
                            <th>ACTIVO</th>
                            <th>CÃ“DIGO</th>
                            <th>NOMBRE</th>
                            <th>IMAGEN</th>
                            <th>UNIDAD</th>
                            <th></th>
                        </tr>
                    </ng-template>
                    <ng-template #body let-item>
                        <tr [pContextMenuRow]="item">
                            <td>
                                <i
                                    *ngIf="item.es_activo; else inactiveIcon"
                                    class="fa-solid fa-check text-green-600"
                                ></i>
                                <ng-template #inactiveIcon>
                                    <i
                                        class="fa-solid fa-times text-red-600"
                                    ></i>
                                </ng-template>
                            </td>
                            <td>{{ item.codigo }}</td>
                            <td>{{ item.nombre }}</td>
                            <td>
                                <p-image
                                    [src]="item.img_base64"
                                    alt="Imagen del producto"
                                    width="50px"
                                ></p-image>
                            </td>
                            <td>{{ item.unidad_medida }}</td>
                            <td>
                                <p-button
                                    variant="text"
                                    severity="info"
                                    icon="fa-solid fa-ellipsis-h"
                                    (click)="menu.toggle($event)"
                                ></p-button>
                            </td>
                        </tr>
                    </ng-template>
                </p-table>
            </ng-template>
        </p-card>
        <p-card class="card flex justify-center">
            <ng-template #content>
                <p-paginator
                    (onPageChange)="onPageChange($event)"
                    [first]="paginationTableOptions.first"
                    [rows]="paginationTableOptions.rows"
                    [totalRecords]="paginationTableOptions.total"
                    [showCurrentPageReport]="true"
                    [showPageLinks]="true"
                    [showJumpToPageDropdown]="false"
                    currentPageReportTemplate="Mostrando {first} a {last} de {totalRecords}"
                    [rowsPerPageOptions]="[5, 10, 50, 100]"
                ></p-paginator>
            </ng-template>
        </p-card>
    </div>
</div>

<p-contextmenu
    #cm
    [model]="listContextMenu"
    (onHide)="selectedRow = null"
></p-contextmenu>

<p-menu #menu [model]="listContextMenu" [popup]="true"></p-menu>
